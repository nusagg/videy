<!doctype html>
<html lang="id">
<head>
<meta charset="utf-8">
<title id="pageTitle">Memuat...</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<style>
*{box-sizing:border-box;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Helvetica,Arial,sans-serif}
html,body{margin:0;height:100%;background:#000;display:flex;justify-content:center;align-items:center}
#wrap{position:relative;width:100%;max-width:430px;border-radius:12px;overflow:hidden}
iframe{width:100%;aspect-ratio:9/16;border:0;background:#000;display:block;}
button#fallback{position:absolute;inset:0;background:#000c;border:0;color:#fff;font-size:18px;font-weight:700;cursor:pointer;display:none}
#main-container{display:flex;flex-direction:column;align-items:center;width:100%;max-width:430px;padding:0 10px 10px 10px}
#animated-cta{display:block;width:100%;padding:14px;margin-top:12px;border:none;border-radius:10px;font-size:17px;font-weight:700;color:#fff;cursor:pointer;text-transform:uppercase;background:linear-gradient(90deg, #ff4d4d, #f90, #ff4d4d);background-size:200% auto;animation:pulse 2s infinite, shimmer 3s linear infinite}
#ad-banner{display:block;width:100%;margin-top:12px;border-radius:10px;overflow:hidden;line-height:0}
#ad-banner img{width:100%;height:auto;display:block}
@keyframes pulse{0%{box-shadow:0 0 0 0 rgba(255,107,7,.7)}70%{box-shadow:0 0 0 15px rgba(255,107,7,0)}100%{box-shadow:0 0 0 0 rgba(255,107,7,0)}}
@keyframes shimmer{to{background-position:-200% center}}
</style>
</head>
<body>

<div id="main-container">
    <div id="wrap">
      <iframe id="vdy" src="" allow="autoplay; fullscreen" scrolling="no" loading="lazy"></iframe>
      <button id="fallback"></button>
    </div>
    <button id="animated-cta"></button>
    <a id="ad-banner" href="" target="_blank">
        <img id="bannerImage" src="" alt="Banner Iklan">
    </a>
</div>

<script>
// Ambil parameter dari URL
const params = new URLSearchParams(window.location.search);

// Definisikan variabel dari parameter URL, dengan nilai default jika kosong
const queryURL = params.get('rdr') || "https://google.com";
const pageTitle = params.get('title') || "Landing Page";
const videoId = params.get('vid') || "PiswTkVa1";
const ctaText = params.get('cta') || "Lanjutkan";
const fallbackText = params.get('flb') || "Play & Lanjut";
const bannerImageUrl = params.get('bimg') || "";
const bannerLinkUrl = params.get('blink') || "#";

// Masukkan data ke dalam elemen HTML
document.getElementById('pageTitle').textContent = pageTitle;
document.title = pageTitle;
document.getElementById('vdy').src = `https://videy.co/v/?id=${videoId}`;
document.getElementById('fallback').textContent = fallbackText;
document.getElementById('animated-cta').textContent = ctaText;
document.getElementById('ad-banner').href = bannerLinkUrl;
document.getElementById('bannerImage').src = bannerImageUrl;


// Logika Redirect (tidak perlu diubah)
const delay=700;
const iframe=document.getElementById('vdy');
const fallback=document.getElementById('fallback');
window.addEventListener('message',(e)=>{if(!e.data||typeof e.data!=="string")return;if(e.data.includes('videyplay'))redirectSoon()});
setTimeout(()=>{fallback.style.display='block'},1200);
fallback.addEventListener('click',()=>{iframe.contentWindow.postMessage('play','*');redirectSoon()});
function redirectSoon(){if(redirectSoon.done)return;redirectSoon.done=true;setTimeout(()=>location.replace(queryURL),delay);fallback.style.display='none'}
document.getElementById('animated-cta').addEventListener('click',()=>{redirectSoon()});
</script>

</body>
</html>
